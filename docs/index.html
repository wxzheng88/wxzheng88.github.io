<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- ç½‘ç«™æ ‡é¢˜ -->
  <title>Paper - è½»é‡çº§å¾®ä¿¡å…¬ä¼—å· Markdown ç¼–è¾‘å™¨</title>
  
  <!-- ç½‘ç«™æè¿° -->
  <meta name="description" content="Paper æ˜¯ä¸€æ¬¾è½»é‡çº§å¾®ä¿¡å…¬ä¼—å· Markdown ç¼–è¾‘å™¨ã€‚ç°ä»£åŒ–ä¸‰æ å¸ƒå±€ï¼Œå®æ—¶ Markdown é¢„è§ˆï¼Œå“åº”å¼è®¾è®¡ï¼›æ”¯æŒå¤§éƒ¨åˆ† Markdown è¯­æ³•ï¼Œæ”¯æŒä¿¡æ¯å¡ç‰‡ã€‚é¢„è§ˆåŒºä¸å¾®ä¿¡å…¬ä¼—å·ç¼–è¾‘å™¨ç­‰å®½ï¼Œæ‰€è§å³æ‰€å¾—ã€‚æ¬¢è¿ä½¿ç”¨ğŸ‘" />
  
  <!-- å…³é”®è¯ -->
  <meta name="keywords" content="Paper,Markdownç¼–è¾‘å™¨,å¾®ä¿¡å…¬ä¼—å·,æ’ç‰ˆå·¥å…·,åœ¨çº¿ç¼–è¾‘å™¨,å®æ—¶é¢„è§ˆ,æ‰€è§å³æ‰€å¾—,å“åº”å¼è®¾è®¡,ä»£ç é«˜äº®,ä¿¡æ¯å¡ç‰‡" />
  
  <!-- ä½œè€…ä¿¡æ¯ -->
  <meta name="author" content="nabin-cn,xiaolinbaba" />
  
  <!-- ç½‘ç«™å›¾æ ‡ -->
  <link rel="icon" href="favicon.svg" type="image/svg+xml" />
  <link rel="shortcut icon" href="favicon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="favicon.svg" />
  
  <!-- Open Graph æ ‡ç­¾ (ç¤¾äº¤åª’ä½“åˆ†äº«) -->
  <meta property="og:title" content="Paper - è½»é‡çº§å¾®ä¿¡å…¬ä¼—å· Markdown ç¼–è¾‘å™¨" />
  <meta property="og:description" content="ç°ä»£åŒ–ä¸‰æ å¸ƒå±€ï¼Œå®æ—¶ Markdown é¢„è§ˆï¼Œæ”¯æŒä¿¡æ¯å¡ç‰‡ï¼Œé¢„è§ˆåŒºä¸å¾®ä¿¡å…¬ä¼—å·ç¼–è¾‘å™¨ç­‰å®½ï¼Œæ‰€è§å³æ‰€å¾—" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="favicon.svg" />
  
  <!-- Twitter Card æ ‡ç­¾ -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Paper - è½»é‡çº§å¾®ä¿¡å…¬ä¼—å· Markdown ç¼–è¾‘å™¨" />
  <meta name="twitter:description" content="ç°ä»£åŒ–ä¸‰æ å¸ƒå±€ï¼Œå®æ—¶ Markdown é¢„è§ˆï¼Œæ”¯æŒä¿¡æ¯å¡ç‰‡ï¼Œæ‰€è§å³æ‰€å¾—" />
  
  <!-- ä¸»é¢˜é¢œè‰² -->
  <meta name="theme-color" content="#007acc" />
  
  <!-- æµè§ˆå™¨å…¼å®¹æ€§ -->
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />
  
  <!-- å¼•å…¥ normalize.cssï¼Œç”¨äºé‡ç½®é»˜è®¤æµè§ˆå™¨æ ·å¼ -->
  <link href="https://cdn.jsdelivr.net/npm/normalize.css@8/normalize.css" rel="stylesheet" />
  <!-- å†…è”æ ·å¼ï¼Œå®šä¹‰å…¨å±€ CSS å˜é‡å’Œæ’ç‰ˆæ ·å¼ -->
  <style>
    /* CSS å˜é‡å®šä¹‰é¢œè‰²ä¸è¡Œé«˜ */
    :root {
      --primary: #007acc;           /* ä¸»é¢˜è“è‰² */
      --primary-dark: #005a9e;      /* æ·±è“è‰² */
      --bg-main: #ffffff;           /* ä¸»èƒŒæ™¯ */
      --bg-secondary: #f8f9fa;      /* æ¬¡è¦èƒŒæ™¯ */
      --bg-tertiary: #f1f3f4;       /* ç¬¬ä¸‰çº§èƒŒæ™¯ */
      --bg-editor: #ffffff;         /* ç¼–è¾‘å™¨èƒŒæ™¯ */
      --bg-preview: #ffffff;        /* é¢„è§ˆåŒºèƒŒæ™¯ */
      --text-main: #333333;         /* ä¸»æ–‡æœ¬é¢œè‰² */
      --text-light: #666666;        /* æ¬¡çº§æ–‡æœ¬é¢œè‰² */
      --text-dark: #262626;         /* æ·±è‰²æ–‡æœ¬ */
      --border-color: #e1e4e8;      /* è¾¹æ¡†é¢œè‰² */
      --hover-bg: #f6f8fa;          /* æ‚¬åœèƒŒæ™¯ */
      --success: #52c41a;           /* æˆåŠŸè‰² */
      --warning: #faad14;           /* è­¦å‘Šè‰² */
      --line-height: 2;             /* è¡Œé«˜å€æ•° */
    }

    /* å…¨å±€é‡ç½® */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* body åŸºæœ¬å¸ƒå±€ä¸å­—ä½“ */
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      color: var(--text-main);
      background: var(--bg-main);
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }

    /* ä¸»å®¹å™¨ */
    .main-container {
      flex: 1;
      display: flex;
      overflow: hidden;
      gap: 8px;
      padding: 8px;
    }

    /* ç¼–è¾‘å™¨åŒºåŸŸ */
    .editor-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: var(--bg-editor);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      overflow: hidden;
    }

    .editor-tabs {
      height: 35px;
      background: var(--bg-tertiary);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .editor-tab {
      height: 100%;
      padding: 0 1rem;
      display: flex;
      align-items: center;
      background: var(--bg-tertiary);
      cursor: pointer;
      font-size: 13px;
      position: relative;
      color: var(--text-main);
    }

    .editor-tab:first-child {
      border-top-left-radius: 7px;
    }

    .editor-tab.active {
      background: var(--bg-tertiary);
    }

    .editor-date {
      padding: 0 1rem;
      font-size: 12px;
      color: var(--text-light);
      display: flex;
      align-items: center;
      height: 100%;
    }

    /* Markdown ç¼–è¾‘å™¨ */
    .editor-content {
      flex: 1; /* Should take remaining vertical space in .editor-container */
      display: flex;
      flex-direction: column;
      /* height: calc(100vh - 35px - 24px); */ /* REMOVED this explicit height */
      min-height: 400px; /* Kept for very small viewports, though flex should manage */
      overflow: hidden; /* Added to ensure it acts as a proper container */
    }

    .markdown-editor {
      flex: 1;
      border: none;
      outline: none;
      resize: none;
      padding: 1.5rem;
      font-size: 14px;
      line-height: 1.6;
      background: var(--bg-editor);
      color: var(--text-main);
      font-family: 'Fira Code', 'Consolas', monospace;
      overflow-y: auto;
    }

    /* CodeMirror ç¼–è¾‘å™¨æ ·å¼ */
    .CodeMirror {
      /* height: auto; */ /* Removed */
      /* min-height: 100%; */ /* Removed */
      font-family: 'Fira Code', 'Consolas', monospace;
      font-size: 14px;
      line-height: 1.6;
      background: var(--bg-editor);
      color: var(--text-main);
      border: none;
      flex: 1;
      position: relative; /* Added this line */
      /* margin-bottom: 4rem !important; */ /* Removed previously */
    }

    .CodeMirror-scroll {
      padding: 1.5rem; /* Unified padding, removed large bottom padding here */
      /* min-height: 100%; */ /* Removed this line */
    }

    /* New rule or augment existing if CodeMirror has one for .CodeMirror-sizer we can override */
    .CodeMirror-sizer {
      position: relative; /* Ensure position context, usually default for sizer */
      padding-bottom: 8rem !important; /* Add padding to the sizer itself */
    }

    .CodeMirror-gutters {
      background: var(--bg-editor);
      border-right: none;
    }

    .CodeMirror-linenumber {
      color: var(--text-light);
      font-size: 12px;
    }

    .CodeMirror-cursor {
      border-left: 2px solid var(--primary);
    }

    .CodeMirror-selected {
      background: rgba(0, 122, 204, 0.1);
    }

    .CodeMirror-focused .CodeMirror-selected {
      background: rgba(0, 122, 204, 0.2);
    }

    /* Markdown è¯­æ³•é«˜äº®æ ·å¼ */
    .cm-header {
      color: #d73a49;
      font-weight: bold;
    }

    .cm-strong {
      color: #d73a49;
      font-weight: bold;
    }

    .cm-em {
      color: #6f42c1;
      font-style: italic;
    }

    .cm-link {
      color: #0366d6;
      text-decoration: underline;
    }

    .cm-url {
      color: #032f62;
    }

    .cm-quote {
      color: #6a737d;
      font-style: italic;
    }

    .cm-code {
      color: #e36209;
      background: #f6f8fa;
      padding: 2px 4px;
      border-radius: 3px;
    }

    .cm-comment {
      color: #6a737d;
    }

    .cm-list {
      color: #d73a49;
    }

    /* é¢„è§ˆåŒºåŸŸ */
    .preview-container {
      width: 768px;
      flex-shrink: 0;
      background: var(--bg-preview);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .preview-header {
      height: 35px;
      background: var(--bg-tertiary);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 1rem;
      font-size: 13px;
      color: var(--text-main);
    }

    .preview-content {
      flex: 1;
      overflow-y: auto;
      overflow-x: hidden;
      display: flex;
      justify-content: center;
      padding: 2rem 0 6rem 0 !important;
    }

    .preview-inner {
      width: 578px;
      padding: 0 2rem 4rem 2rem !important;
      margin-bottom: 3rem !important;
    }

    /* å³ä¾§ä¸»é¢˜é¢æ¿ */
    .theme-panel {
      width: 200px;
      flex-shrink: 0;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
    }

    .theme-header {
      height: 35px;
      background: var(--bg-tertiary);
      display: flex;
      align-items: center;
      padding: 0 1rem;
      font-size: 13px;
      color: var(--text-main);
      border-bottom: 1px solid var(--border-color);
    }

    .theme-content {
      flex: 1;
      padding: 1rem 1rem 5rem 1rem;
      overflow-y: auto;
    }

    .theme-section {
      margin-bottom: 1.5rem;
    }

    .theme-section-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-light);
      margin-bottom: 0.8rem;
      text-transform: uppercase;
    }

    .color-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.5rem;
    }

    .color-item {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      cursor: pointer;
      border: 2px solid transparent;
      transition: all 0.2s;
      position: relative;
    }

    .color-item:hover {
      transform: scale(1.1);
    }

    .color-item.active {
      border-color: var(--primary);
      box-shadow: 0 0 0 2px var(--primary);
    }

    .color-item.active::after {
      content: 'âœ“';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 14px;
      font-weight: bold;
      text-shadow: 0 0 2px rgba(0,0,0,0.5);
    }

    /* é¢„è®¾é¢œè‰² */
    .color-blue { background: #007acc; }
    .color-green { background: #28a745; }
    .color-red { background: #dc3545; }
    .color-yellow { background: #ffc107; }
    .color-purple { background: #6f42c1; }
    .color-teal { background: #20c997; }
    .color-pink { background: #e83e8c; }
    .color-orange { background: #fd7e14; }
    .color-gray { background: #6c757d; }

    /* å­—ä½“å¤§å°æ§åˆ¶ */
    .font-size-control {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .font-size-btn {
      width: 32px;
      height: 32px;
      border: 1px solid var(--border-color);
      background: var(--bg-main);
      color: var(--text-main);
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }

    .font-size-btn:hover {
      background: var(--hover-bg);
    }

    .font-size-display {
      flex: 1;
      text-align: center;
      font-size: 12px;
      color: var(--text-light);
    }

    /* Markdown æ¸²æŸ“æ ·å¼ */
    .typo {
      max-width: none;
      margin: 0 0 5rem 0 !important;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: 14px;
      line-height: 1.8;
      word-wrap: break-word;
      color: #333;
      padding-bottom: 4rem !important;
    }

    .typo p {
      margin: 16px 0;
      text-indent: 0;
    }

    .typo h1, .typo h4, .typo h5, .typo h6 {
      font-weight: 600;
      line-height: 1.4;
      margin: 20px 0 16px 0;
      color: #333;
    }

    .typo h1 { 
      font-size: 22px; 
      text-align: center;
      margin: 20px 0;
    }
    
    .typo h2 { 
      font-size: 20px; 
      background: #d0d0d0;
      color: #333;
      padding: 10px 20px;
      display: block;
      margin: 24px auto 20px auto;
      font-weight: 600;
      line-height: 1.4;
      width: fit-content;
      text-align: center;
      position: relative;
    }
    
    .typo h3 { 
      font-size: 17px;
      background: #f0f0f0;
      color: #333;
      padding: 8px 0 8px 12px;
      border: none;
      border-left: 4px solid #888888;
      display: block;
      margin: 18px 0 14px 0;
      font-weight: 600;
      line-height: 1.4;
      width: 100%;
    }
    
    .typo h4 { font-size: 16px; }
    .typo h5 { font-size: 15px; }
    .typo h6 { font-size: 14px; }

    .typo hr {
      border: none;
      border-top: 1px dashed #aaa;
      margin: 24px 0;
    }

    .typo a {
      color: var(--primary);
      text-decoration: none;
      border-bottom: 1px solid rgba(0,122,204,0.3);
      transition: border-bottom-color .2s;
    }

    .typo a:hover {
      border-bottom-color: rgba(0,122,204,0.8);
    }

    /* å¼•ç”¨é“¾æ¥æ ·å¼ */
    .typo .reference-link {
      color: var(--primary);
      text-decoration: none;
      border-bottom: none;
      vertical-align: super;
      font-size: 0.8em;
      font-weight: bold;
      padding: 0 2px;
    }

    .typo .reference-link:hover {
      background: rgba(0,122,204,0.1);
      border-radius: 2px;
    }

    /* å¼•ç”¨åˆ—è¡¨æ ·å¼ */
    .typo .references {
      margin-top: 40px;
      border-top: 1px solid #e1e4e8;
      padding-top: 20px;
    }

    .typo .references h4 {
      color: #666;
      font-size: 16px;
      margin-bottom: 16px;
    }

    .typo .references ol {
      margin: 0;
      padding-left: 20px;
    }

    .typo .references li {
      margin: 8px 0;
      font-size: 13px;
      color: #666;
      line-height: 1.5;
      word-break: break-all;
    }

    .typo ul, .typo ol {
      margin: 16px 0 16px 2em;
      padding: 0;
    }

    .typo li {
      margin: 8px 0;
    }

    .typo blockquote {
      margin: 8px 0;
      padding: 12px 16px;
      border: none;
      color: #666;
      background: #f5f5f5;
      border-radius: 8px;
      font-style: normal;
    }

    .typo blockquote p {
      margin: 0;
    }

    /* ä¿¡æ¯å¡ç‰‡æ ·å¼ */
    .typo .info-card {
      background: #D0F9D0;
      border-radius: 8px;
      padding: 12px 16px;
      margin: 20px 0;
      position: relative;
    }

    .typo .info-card .card-title {
      color: #d32f2f;
      font-weight: bold;
      font-size: 14px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .typo .info-card .card-title::before {
      content: 'ğŸ’¡';
      margin-right: 8px;
      font-size: 14px;
    }

    .typo .info-card p {
      margin: 8px 0;
      line-height: 1.8;
      color: #2e2e2e;
    }

    .typo .info-card p:first-child {
      margin-top: 0;
    }

    .typo .info-card p:last-child {
      margin-bottom: 0;
    }

    /* ä¿¡æ¯å¡ç‰‡å†…çš„å›¾ç‰‡æ ·å¼ */
    .typo .info-card img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      margin: 12px 0;
      display: block;
    }

    /* çŠ¶æ€æ  */
    .status-bar {
      height: 24px;
      background: var(--bg-secondary);
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 1rem;
      font-size: 12px;
      color: var(--text-light);
    }

    .status-left, .status-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .status-center {
      display: flex;
      align-items: center;
      justify-content: center;
      flex: 1;
      font-size: 10px;
      color: #999;
    }

    /* GitHub å›¾æ ‡æ ·å¼ */
    .github-icon-container {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
      padding: 0;
    }

    .github-icon-link {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--text-main);
      color: white;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .github-icon-link:hover {
      background: var(--primary);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,122,204,0.3);
    }

    .github-icon-link svg {
      width: 20px;
      height: 20px;
    }

    /* æ“ä½œæŒ‰é’® */
    .action-buttons {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: center;
      justify-content: center;
      height: calc(100% - 2rem);
      padding: 1rem;
    }

    .action-btn {
      padding: 0.8rem 1rem;
      border: none;
      border-radius: 6px;
      background: var(--primary);
      color: white;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 2px 8px rgba(0,122,204,0.3);
      width: 140px;
      text-align: center;
      white-space: nowrap;
    }

    .action-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0,122,204,0.4);
    }

    .action-btn.secondary {
      background: var(--bg-main);
      color: var(--text-main);
      border: 1px solid var(--border-color);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .action-btn.secondary:hover {
      background: var(--hover-bg);
    }

    /* äº”å½©çº¸å±‘ç”»å¸ƒ */
    #confetti-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
    }

    /* æ¨¡æ€æ¡† */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 10000;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: var(--bg-main);
      padding: 2rem;
      width: 80%;
      max-width: 800px;
      height: 70%;
      border-radius: 12px;
      border: 1px solid var(--border-color);
      position: relative;
      display: flex;
      flex-direction: column;
      color: var(--text-main);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-color);
    }

    .modal-header h3 {
      margin: 0;
      color: var(--text-main);
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-light);
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      transition: background 0.2s;
    }

    .close-btn:hover {
      background: var(--hover-bg);
      color: var(--text-main);
    }

    .modal-body {
      flex: 1;
      overflow: auto;
    }

    #htmlSource {
      width: 100%;
      height: 100%;
      font-family: monospace;
      font-size: 13px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      padding: 1rem;
      resize: none;
      outline: none;
      background: var(--bg-tertiary);
      color: var(--text-main);
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 1400px) {
      .theme-panel {
        display: none;
      }
    }

    @media (max-width: 1200px) {
      .preview-container {
        width: 600px;
      }
      .preview-inner {
        width: 480px;
      }
    }

    @media (max-width: 1000px) {
      .main-container {
        flex-direction: column;
      }
      .preview-container {
        width: 100%;
      }
      .preview-inner {
        width: 578px;
        max-width: calc(100% - 4rem);
      }
    }

    .typo img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 16px auto;
      border-radius: 8px;
      box-sizing: border-box;
    }

    /* åˆ—è¡¨ä¸­çš„å›¾ç‰‡ç‰¹æ®Šå¤„ç† */
    .typo li img,
    .typo ul img,
    .typo ol img {
      max-width: 100%;
      display: block;
      margin: 0.1em auto 0.5em;
      border-radius: 8px;
      border: 1px solid rgba(0, 0, 0, 0.04);
    }

    /* æ¨ªå±æ»‘åŠ¨å¹»ç¯ç‰‡æ ·å¼ - åŸºäºå¾®ä¿¡å…¬ä¼—å·æœ‰æ•ˆå®ç° */
    .typo section[style*="overflow-x: scroll"] {
      scrollbar-width: thin;
      scrollbar-color: #ddd transparent;
    }

    .typo section[style*="overflow-x: scroll"]::-webkit-scrollbar {
      height: 6px;
    }

    .typo section[style*="overflow-x: scroll"]::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 3px;
    }

    .typo section[style*="overflow-x: scroll"]::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 3px;
    }

    .typo section[style*="overflow-x: scroll"]::-webkit-scrollbar-thumb:hover {
      background: #999;
    }

    /* ä¿®å¤é¢„è§ˆåŒºæ»‘åŠ¨å¹»ç¯ç‰‡æ˜¾ç¤ºé—®é¢˜ - è®©æ¯å¼ å›¾ç‰‡å®Œæ•´æ˜¾ç¤º */
    .typo section[style*="overflow-x: scroll"] section[style*="display: inline-block"][style*="width: 90%"] {
      width: 100% !important;
      margin-right: 0 !important;
      flex-shrink: 0;
    }

    .typo section[style*="overflow-x: scroll"] {
      display: flex !important;
      overflow-x: auto !important;
      overflow-y: hidden !important;
      scroll-snap-type: x mandatory;
    }

    .typo section[style*="overflow-x: scroll"] section[style*="display: inline-block"] {
      scroll-snap-align: start;
    }

    /* æ›´ç²¾ç¡®çš„ä¿®å¤ - é’ˆå¯¹å›¾ç‰‡å®¹å™¨ */
    .preview-inner section[style*="overflow-x: scroll"] section[style*="width: 90%"] {
      width: calc(100% - 20px) !important;
      margin-right: 20px !important;
      min-width: calc(100% - 20px) !important;
    }

    .preview-inner section[style*="overflow-x: scroll"] {
      scroll-behavior: smooth;
    }

    .typo code {
      font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Source Code Pro', 'Consolas', 'Courier New', monospace;
      background: #f1f3f4;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 13px;
      color: #d73a49;
      border: none;
    }

    .typo pre {
      background: #f5f5f5;
      color: #333;
      padding: 0;
      overflow: auto;
      font-size: 13px;
      margin: 16px 0;
      border: none;
      border-radius: 8px;
      position: relative;
    }

    .typo pre code {
      background: none;
      padding: 8px 16px 16px 16px;
      color: inherit;
      display: block;
      font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Source Code Pro', 'Consolas', 'Courier New', monospace;
      font-size: 12px;
      line-height: 1.6;
      overflow-x: auto;
      white-space: pre;
      word-wrap: normal;
      word-break: normal;
    }

    /* Kimbie Light ä»£ç é«˜äº®æ ·å¼ */
    .typo pre code .hljs-comment,
    .typo pre code .hljs-quote,
    .typo pre .hljs-comment,
    .typo pre .hljs-quote {
      color: #a57a4c !important;
      font-style: italic;
    }

    .typo pre .hljs-keyword,
    .typo pre .hljs-selector-tag,
    .typo pre .hljs-subst {
      color: #dc3958 !important;
      font-weight: bold;
    }

    .typo pre .hljs-number,
    .typo pre .hljs-literal,
    .typo pre .hljs-variable,
    .typo pre .hljs-template-variable,
    .typo pre .hljs-tag .hljs-attr {
      color: #f79a32 !important;
    }

    .typo pre .hljs-string,
    .typo pre .hljs-doctag {
      color: #889b4a !important;
    }

    .typo pre .hljs-title,
    .typo pre .hljs-section,
    .typo pre .hljs-selector-id {
      color: #f06431 !important;
      font-weight: bold;
    }

    .typo pre .hljs-type,
    .typo pre .hljs-class .hljs-title {
      color: #f79a32 !important;
      font-weight: bold;
    }

    .typo pre .hljs-tag,
    .typo pre .hljs-name,
    .typo pre .hljs-attribute {
      color: #dc3958 !important;
      font-weight: normal;
    }

    .typo pre .hljs-regexp,
    .typo pre .hljs-link {
      color: #889b4a !important;
    }

    .typo pre .hljs-symbol,
    .typo pre .hljs-bullet {
      color: #f79a32 !important;
    }

    .typo pre .hljs-built_in,
    .typo pre .hljs-builtin-name {
      color: #dc3958 !important;
    }

    .typo pre .hljs-meta {
      color: #a57a4c !important;
    }

    .typo pre .hljs-deletion {
      background: #dc3958 !important;
    }

    .typo pre .hljs-addition {
      background: #889b4a !important;
    }

    .typo pre .hljs-emphasis {
      font-style: italic;
    }

    .typo pre .hljs-strong {
      font-weight: bold;
    }

    .typo table {
      width: 100%;
      margin: 24px 0;
      border-collapse: collapse;
    }

    .typo table th,
    .typo table td {
      border: 1px solid #e5e5e5;
      padding: 8px 12px;
      text-align: left;
    }

    .typo table th {
      background: #f5f7f9;
      font-weight: 600;
    }
  </style>
  <!-- å¼•å…¥ Showdownï¼Œç”¨äºå°† Markdown è½¬æ¢ä¸º HTML -->
  <script src="https://cdn.jsdelivr.net/npm/showdown@2.1.0/dist/showdown.min.js"></script>
  <!-- å¼•å…¥ CodeMirror ç”¨äº Markdown è¯­æ³•é«˜äº® -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/github.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/markdown/markdown.min.js"></script>
  <!-- å¼•å…¥ highlight.js ç”¨äºä»£ç é«˜äº® -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/java.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
  <!-- å¼•å…¥ Canvas-Confettiï¼Œç”¨äºç‚¹å‡»å¤åˆ¶ååŠ¨ç”»æ•ˆæœ -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</head>
<body>
  <!-- äº”å½©çº¸å±‘åŠ¨ç”»ç”»å¸ƒ -->
  <canvas id="confetti-canvas"></canvas>
  
  <!-- ä¸»å®¹å™¨ -->
  <div class="main-container">
    <!-- ç¼–è¾‘å™¨å®¹å™¨ -->
    <div class="editor-container">
      <!-- ç¼–è¾‘å™¨æ ‡ç­¾é¡µ -->
      <div class="editor-tabs">
        <div class="editor-tab active">
          <span>ç¼–è¾‘åŒº</span>
        </div>
        <div class="editor-date" id="editorDate">
          <!-- æ—¥æœŸå°†é€šè¿‡JavaScriptåŠ¨æ€æ›´æ–° -->
        </div>
      </div>

      <!-- ç¼–è¾‘å™¨å†…å®¹ -->
      <div class="editor-content">
        <textarea class="markdown-editor" id="markdown" placeholder="åœ¨æ­¤è¾“å…¥ Markdown å†…å®¹...

æ”¯æŒå®æ—¶é¢„è§ˆï¼Œç¼–è¾‘å®Œæˆåå¯ä¸€é”®å¤åˆ¶åˆ°å¾®ä¿¡å…¬ä¼—å·ã€‚" spellcheck="false"></textarea>
      </div>
    </div>

    <!-- é¢„è§ˆå®¹å™¨ -->
    <div class="preview-container">
      <div class="preview-header">é¢„è§ˆåŒº</div>
      <div class="preview-content">
        <div class="preview-inner">
          <article id="preview" class="typo"></article>
        </div>
      </div>
    </div>

    <!-- å‘å¸ƒé¢æ¿ -->
    <div class="theme-panel">
      <div class="theme-header">å‘å¸ƒåŒº</div>
      <div class="theme-content">
        <!-- æ“ä½œæŒ‰é’® -->
        <div class="action-buttons">
          <!-- GitHub å›¾æ ‡é“¾æ¥ -->
          <div class="github-icon-container">
            <a href="https://github.com/xiaolinbaba/Paper" target="_blank" class="github-icon-link" title="GitHubä»“åº“">
              <svg width="32" height="32" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
              </svg>
            </a>
          </div>
          
          <button class="action-btn" id="copyBtn">å¤åˆ¶åˆ°å…¬ä¼—å·</button>
          <button class="action-btn secondary" onclick="window.open('https://mermaid-live.nodejs.cn/edit', '_blank')">Mermaidæ¸²æŸ“</button>
          <button class="action-btn secondary" onclick="window.open('https://mathjax.thus.chat', '_blank')">æ•°å­¦å…¬å¼æ¸²æŸ“</button>
          <button class="action-btn secondary" onclick="window.open('https://xiaolinbaba.notion.site/Markdown-bcf20a9190db4b208dc137f755788405', '_blank')">Markdownè¯­æ³•æŸ¥è¯¢</button>
        </div>
      </div>
    </div>
  </div>

  <!-- çŠ¶æ€æ  -->
  <div class="status-bar">
    <div class="status-left">
      <span id="wordCount">å­—æ•°: 0</span>
      <span id="charCount">å­—ç¬¦: 0</span>
      <span id="saveStatus">å·²ä¿å­˜</span>
    </div>
    <div class="status-center">
      <span>Copyright Â© 2025-2030 nabin-cn,xiaolinbaba. All Rights Reserved.</span>
    </div>
    <div class="status-right">
      <span>Markdown</span>
      <span>UTF-8</span>
    </div>
  </div>

  <script>
    // ç­‰å¾… DOM åŠ è½½å®Œæˆåæ‰§è¡Œè„šæœ¬
    document.addEventListener('DOMContentLoaded', () => {
      // ç­‰å¾…æ‰€æœ‰åº“åŠ è½½å®Œæˆ
      function waitForLibraries() {
        return new Promise((resolve) => {
          const checkLibraries = () => {
            const hljs = !!window.hljs;
            const showdown = !!window.showdown;
            const codemirror = !!window.CodeMirror;
            
            console.log('Library status:', { hljs, showdown, codemirror });
            
            if (hljs && showdown && codemirror) {
              resolve();
            } else {
              setTimeout(checkLibraries, 100);
            }
          };
          checkLibraries();
        });
      }
      
      // ç­‰å¾…åº“åŠ è½½å®Œæˆååˆå§‹åŒ–
      waitForLibraries().then(() => {
        console.log('All libraries loaded, initializing...');
        
        // åˆå§‹åŒ– highlight.js
        if (window.hljs) {
          hljs.configure({
            ignoreUnescapedHTML: true
          });
          console.log('highlight.js loaded successfully');
        } else {
          console.error('highlight.js not loaded');
        }
        
        // åˆå§‹åŒ–ç¼–è¾‘å™¨
        initializeEditor();
      });
      
      function initializeEditor() {
        // åˆå§‹åŒ– Showdown è½¬æ¢å™¨
        const converter = new showdown.Converter({ 
          tables: true, 
          ghCodeBlocks: true, 
          strikethrough: true, 
          tasklists: true,
          emoji: true,
          underline: true,
          ghCompatibleHeaderId: true,
          parseImgDimensions: true
        });
        
        // DOM å…ƒç´ å¼•ç”¨
        const mdInput = document.getElementById('markdown');
        const preview = document.getElementById('preview');
        const copyBtn = document.getElementById('copyBtn');
        const confettiCanvas = document.getElementById('confetti-canvas');
        const wordCount = document.getElementById('wordCount');
        const charCount = document.getElementById('charCount');
        const saveStatus = document.getElementById('saveStatus');
        const editorDate = document.getElementById('editorDate');

        let myConfetti;
        let autoSaveTimer;
        let codeMirrorEditor;
        let isRendering = false; // æ·»åŠ æ¸²æŸ“çŠ¶æ€æ ‡è®°

        // åˆå§‹åŒ– CodeMirror ç¼–è¾‘å™¨
        codeMirrorEditor = CodeMirror.fromTextArea(mdInput, {
          mode: 'markdown',
          theme: 'github',
          lineNumbers: true, // å°†è¿™é‡Œä» false æ”¹ä¸º true
          lineWrapping: true,
          autofocus: true,
          viewportMargin: Infinity,
          placeholder: 'åœ¨æ­¤è¾“å…¥ Markdown å†…å®¹...\n\næ”¯æŒå®æ—¶é¢„è§ˆï¼Œç¼–è¾‘å®Œæˆåå¯ä¸€é”®å¤åˆ¶åˆ°å¾®ä¿¡å…¬ä¼—å·ã€‚',
          extraKeys: {
            'Ctrl-S': function(cm) {
              // æ‰‹åŠ¨ä¿å­˜å¿«æ·é”®
              localStorage.setItem('md_editor_draft', cm.getValue());
              localStorage.setItem('md_editor_save_time', new Date().toLocaleString());
              saveStatus.textContent = 'æ‰‹åŠ¨ä¿å­˜æˆåŠŸ';
              setTimeout(() => {
                saveStatus.textContent = 'å·²ä¿å­˜';
              }, 2000);
            },
            'Ctrl-Enter': function(cm) {
              // å¤åˆ¶å¿«æ·é”®
              copyBtn.click();
            }
          }
        });

        // å¼ºåˆ¶åˆ·æ–° CodeMirror å°ºå¯¸
        setTimeout(() => {
          codeMirrorEditor.refresh();
        }, 100);

        // çª—å£å¤§å°æ”¹å˜æ—¶åˆ·æ–°ç¼–è¾‘å™¨
        window.addEventListener('resize', () => {
          setTimeout(() => {
            codeMirrorEditor.refresh();
          }, 100);
        });

        // é‡æ–°å®šä¹‰è·å–ç¼–è¾‘å™¨å†…å®¹çš„æ–¹æ³•
        function getEditorValue() {
          return codeMirrorEditor.getValue();
        }

        function setEditorValue(value) {
          codeMirrorEditor.setValue(value);
        }

        // åˆå§‹åŒ– confetti å®ä¾‹
        if (window.confetti && typeof window.confetti.create === 'function') {
          myConfetti = window.confetti.create(confettiCanvas, { resize: true, useWorker: true });
        } else if (window.confetti) {
          myConfetti = window.confetti;
        }
        
        // æ›´æ–°æ—¥æœŸæ˜¾ç¤º
        function updateDate() {
          const now = new Date();
          const weekdays = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
          const year = now.getFullYear();
          const month = String(now.getMonth() + 1).padStart(2, '0');
          const day = String(now.getDate()).padStart(2, '0');
          const weekday = weekdays[now.getDay()];
          
          const dateString = `${year}-${month}-${day} ${weekday}`;
          editorDate.textContent = dateString;
        }
        
        // åˆå§‹åŒ–æ—¥æœŸæ˜¾ç¤º
        updateDate();
        
        // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡æ—¥æœŸï¼ˆä»¥é˜²è·¨æ—¥ï¼‰
        setInterval(updateDate, 60000);
        
        // ç»Ÿè®¡æ–‡æœ¬ä¿¡æ¯
        function updateStats() {
          const text = getEditorValue();
          const characters = text.length;
          
          // æ”¹è¿›çš„å­—æ•°ç»Ÿè®¡é€»è¾‘
          let words = 0;
          if (text.trim()) {
            // ç»Ÿè®¡ä¸­æ–‡å­—ç¬¦æ•°ï¼ˆåŒ…æ‹¬ä¸­æ–‡æ ‡ç‚¹ï¼‰
            const chineseChars = (text.match(/[\u4e00-\u9fa5\u3000-\u303f\uff00-\uffef]/g) || []).length;
            
            // ç»Ÿè®¡è‹±æ–‡å•è¯æ•°ï¼ˆç§»é™¤ä¸­æ–‡å­—ç¬¦åæŒ‰ç©ºç™½åˆ†å‰²ï¼‰
            const englishText = text.replace(/[\u4e00-\u9fa5\u3000-\u303f\uff00-\uffef]/g, '');
            const englishWords = englishText.trim() ? englishText.trim().split(/\s+/).filter(word => word.length > 0).length : 0;
            
            // æ€»å­—æ•° = ä¸­æ–‡å­—ç¬¦æ•° + è‹±æ–‡å•è¯æ•°
            words = chineseChars + englishWords;
          }
          
          wordCount.textContent = `å­—æ•°: ${words}`;
          charCount.textContent = `å­—ç¬¦: ${characters}`;
        }
        
        // å¤„ç†å¼•ç”¨é“¾æ¥
        function processReferences(html) {
          const references = [];
          let refIndex = 1;
          
          // åœ¨é“¾æ¥åé¢æ·»åŠ å¼•ç”¨æ ‡è®°ï¼Œä¿ç•™åŸé“¾æ¥
          html = html.replace(/<a href="([^"]+)"[^>]*>([^<]+)<\/a>/g, (match, url, text) => {
            references.push({ url, text });
            return `${match}<span class="reference-link">[${refIndex++}]</span>`;
          });
          
          // å¦‚æœæœ‰å¼•ç”¨ï¼Œæ·»åŠ å¼•ç”¨åˆ—è¡¨
          if (references.length > 0) {
            let referencesHtml = '<div class="references"><h4>å¼•ç”¨é“¾æ¥</h4><ol>';
            references.forEach((ref, index) => {
              referencesHtml += `<li>${ref.text}: ${ref.url}</li>`;
            });
            referencesHtml += '</ol></div>';
            html += referencesHtml;
          }
          
          return html;
        }

        // å¤„ç†ä¿¡æ¯å¡ç‰‡
        function processInfoCards(markdownText) {
          // å…ˆä¿æŠ¤ä»£ç å—å†…å®¹
          const codeBlocks = [];
          let codeBlockIndex = 0;
          
          // åŒ¹é…ä»£ç å—ï¼ˆåŒ…æ‹¬è¡Œå†…ä»£ç å’Œå¤šè¡Œä»£ç å—ï¼‰
          markdownText = markdownText.replace(/```[\s\S]*?```|`[^`]+`/g, (match) => {
            const placeholder = `__CODE_BLOCK_${codeBlockIndex}__`;
            codeBlocks[codeBlockIndex] = match;
            codeBlockIndex++;
            return placeholder;
          });
          
          // å¤„ç† :::info æ ‡è®°çš„ä¿¡æ¯å¡ç‰‡
          markdownText = markdownText.replace(/:::info\s+(.*?)\n([\s\S]*?):::/g, (match, title, content) => {
            // å°†å†…å®¹è½¬æ¢ä¸ºHTMLæ ¼å¼çš„å ä½ç¬¦ï¼Œç¨åä¼šè¢«æ›¿æ¢
            return `<div class="info-card-placeholder" data-title="${title}" data-content="${encodeURIComponent(content.trim())}"></div>`;
          });
          
          // æ¢å¤ä»£ç å—å†…å®¹
          codeBlocks.forEach((codeBlock, index) => {
            markdownText = markdownText.replace(`__CODE_BLOCK_${index}__`, codeBlock);
          });
          
          return markdownText;
        }

        // å¤„ç†ä¿¡æ¯å¡ç‰‡å ä½ç¬¦
        function processInfoCardPlaceholders(html) {
          html = html.replace(/<div class="info-card-placeholder" data-title="([^"]*)" data-content="([^"]*)"><\/div>/g, (match, title, encodedContent) => {
            const content = decodeURIComponent(encodedContent);
            let processedContent = converter.makeHtml(content);
            
            // æ¸…ç†å†…éƒ¨çš„æ®µè½æ ‡ç­¾ï¼Œä½¿ç”¨ç®€å•çš„æ¢è¡Œ
            processedContent = processedContent.replace(/<p>/g, '').replace(/<\/p>/g, '<br><br>');
            processedContent = processedContent.replace(/<br><br>$/, ''); // ç§»é™¤æœ«å°¾çš„æ¢è¡Œ
            
            // ä¸ºä¿¡æ¯å¡ç‰‡å†…çš„å›¾ç‰‡æ·»åŠ æ ·å¼é™åˆ¶
            processedContent = processedContent.replace(/<img([^>]*)>/g, '<img$1 style="max-width: 100%; height: auto; display: block; margin: 8px 0; border-radius: 6px;">');
            
            // ä½¿ç”¨è¡¨æ ¼æ¥åˆ›å»ºå¸¦èƒŒæ™¯è‰²çš„å¡ç‰‡æ•ˆæœï¼ˆå¾®ä¿¡å…¬ä¼—å·å®Œå…¨æ”¯æŒï¼‰
            return `<table style="width: 100%; margin: 20px 0; border-collapse: collapse;">
              <tr>
                <td style="background-color: #D0F9D0; border: none; border-radius: 12px; padding: 8px 16px 12px 16px;">
                  <p style="margin: 0 0 6px 0; color: #d32f2f; font-weight: bold; font-size: 16px;">
                    ğŸ’¡ ${title}
                  </p>
                  <p style="margin: 0; color: #333; line-height: 1.6;">
                    ${processedContent}
                  </p>
                </td>
              </tr>
            </table>`;
          });
          
          return html;
        }

        // å¤„ç†æ¨ªå±æ»‘åŠ¨å¹»ç¯ç‰‡
        function processSlideshow(markdownText) {
          // å…ˆä¿æŠ¤ä»£ç å—å†…å®¹
          const codeBlocks = [];
          let codeBlockIndex = 0;
          
          // åŒ¹é…ä»£ç å—ï¼ˆåŒ…æ‹¬è¡Œå†…ä»£ç å’Œå¤šè¡Œä»£ç å—ï¼‰
          markdownText = markdownText.replace(/```[\s\S]*?```|`[^`]+`/g, (match) => {
            const placeholder = `__CODE_BLOCK_${codeBlockIndex}__`;
            codeBlocks[codeBlockIndex] = match;
            codeBlockIndex++;
            return placeholder;
          });
          
          // åŒ¹é… <![alt](url),![alt](url)> è¯­æ³•ï¼Œä½†ä¸åŒ¹é…è¡Œå†…ä»£ç ä¸­çš„å†…å®¹
          // è¦æ±‚å‰é¢æ˜¯è¡Œé¦–ã€ç©ºç™½å­—ç¬¦æˆ–æ¢è¡Œç¬¦ï¼Œåé¢æ˜¯ç©ºç™½å­—ç¬¦ã€æ¢è¡Œç¬¦æˆ–è¡Œå°¾
          const slideshowRegex = /(^|\s|>\s*)\n?<!\[([^\]]*)\]\(([^)]+)\)(?:,\s*!\[([^\]]*)\]\(([^)]+)\))+>(?=\s|$|\n)/gm;
          
          markdownText = markdownText.replace(slideshowRegex, (match, prefix, ...groups) => {
            // æå–æ‰€æœ‰å›¾ç‰‡
            const imageRegex = /!\[([^\]]*)\]\(([^)]+)\)/g;
            const images = [];
            let imageMatch;
            
            while ((imageMatch = imageRegex.exec(match)) !== null) {
              images.push({
                alt: imageMatch[1] || '',
                url: imageMatch[2]
              });
            }
            
            if (images.length === 0) return match;
            
            // ç”Ÿæˆå”¯ä¸€ID
            const slideshowId = 'slideshow-' + Math.random().toString(36).substr(2, 9);
            
            // åˆ›å»ºæ»‘åŠ¨å¹»ç¯ç‰‡HTMLï¼ˆåŸºäºå¾®ä¿¡å…¬ä¼—å·æœ‰æ•ˆå®ç°ï¼‰
            let slideshowHTML = '<section style="box-sizing: border-box; font-size: 16px; margin: 20px 0;">';
            slideshowHTML += '<section style="font-family: å¾®è½¯é›…é»‘; font-size: 16px;">';
            slideshowHTML += '<section style="margin: 0px auto; box-sizing: border-box; width: 100%;">';
            slideshowHTML += '<section style="margin: 0px auto; text-align: center;">';
            slideshowHTML += '<section style="display: inline-block; width: 100%;">';
            
            // æ ¸å¿ƒæ»šåŠ¨å®¹å™¨
            slideshowHTML += '<section style="overflow-x: scroll; overflow-y: hidden; -webkit-overflow-scrolling: touch; white-space: nowrap; width: 100%; text-align: center;">';
            
            images.forEach((img, index) => {
              slideshowHTML += '<section style="display: inline-block; width: 90%; margin-right: 10px; vertical-align: top;">';
              slideshowHTML += `<img style="display: block; width: 100%; height: auto; margin: 0.1em auto 0.2em; border: 1px solid rgba(0, 0, 0, 0.04); border-radius: 8px; vertical-align: top;" title="${img.alt || 'picture'}" alt="${img.alt || 'picture'}" src="${img.url}">`;
              slideshowHTML += `<p style="margin: 0; font-size: 12px; color: #333; text-align: center; white-space: normal; line-height: 1.2;">${img.alt || 'picture'}</p>`;
              slideshowHTML += '</section>';
            });
            
            slideshowHTML += '</section>';
            slideshowHTML += '</section>';
            slideshowHTML += '</section>';
            slideshowHTML += '</section>';
            slideshowHTML += '</section>';
            slideshowHTML += '<section style="text-align: center; margin: 4px 0 0 0; padding: 0;"><p style="font-size: 12px; color: #333; text-align: center; margin: 0; padding: 0; line-height: 1.5;">&lt;&lt;&lt; å·¦å³æ»‘åŠ¨çœ‹æ›´å¤š &gt;&gt;&gt;</p></section>';
            slideshowHTML += '</section>';
            
            return prefix + slideshowHTML;
          });
          
          // æ¢å¤ä»£ç å—å†…å®¹
          codeBlocks.forEach((codeBlock, index) => {
            markdownText = markdownText.replace(`__CODE_BLOCK_${index}__`, codeBlock);
          });
          
          return markdownText;
        }

        // æ¸²æŸ“ Markdown
        function render() { 
          isRendering = true; // å¼€å§‹æ¸²æŸ“
          console.log('Starting render...');
          let markdownText = getEditorValue();
          console.log('Original markdown length:', markdownText.length);
          
          // ä¿å­˜å½“å‰æ»šåŠ¨ä½ç½®
          const previewContent = document.querySelector('.preview-content');
          const currentScrollTop = previewContent.scrollTop;
          
          // å¤„ç†æ¨ªå±æ»‘åŠ¨å¹»ç¯ç‰‡ï¼ˆåœ¨Markdownè½¬æ¢å‰ï¼‰
          markdownText = processSlideshow(markdownText);
          
          // å…ˆå¤„ç†ä¿¡æ¯å¡ç‰‡ï¼ˆåœ¨Markdownè½¬æ¢å‰ï¼‰
          markdownText = processInfoCards(markdownText);
          
          console.log('Converting markdown to HTML...');
          let html = converter.makeHtml(markdownText);
          console.log('HTML conversion complete, length:', html.length);
          
          // å¤„ç†ä¿¡æ¯å¡ç‰‡å ä½ç¬¦
          html = processInfoCardPlaceholders(html);
          
          // å¤„ç†å¼•ç”¨é“¾æ¥
          html = processReferences(html);
          
          console.log('Setting preview innerHTML...');
          preview.innerHTML = html;
          
          // æ¢å¤æ»šåŠ¨ä½ç½®
          previewContent.scrollTop = currentScrollTop;
          
          // åº”ç”¨ä»£ç é«˜äº® - ä½¿ç”¨æ›´çŸ­çš„å»¶è¿Ÿå¹¶ä¼˜åŒ–å¤„ç†
          setTimeout(() => {
            console.log('Applying syntax highlighting...');
            if (window.hljs) {
              const codeBlocks = preview.querySelectorAll('pre code');
              console.log('Found code blocks:', codeBlocks.length);
              codeBlocks.forEach((block, index) => {
                // æ£€æŸ¥æ˜¯å¦å·²ç»é«˜äº®è¿‡
                if (block.hasAttribute('data-highlighted')) {
                  return;
                }
                
                // æ¸…é™¤ä¹‹å‰çš„é«˜äº®
                block.removeAttribute('data-highlighted');
                block.className = block.className.replace(/hljs[^\s]*/g, '').trim();
                
                // å°è¯•æ£€æµ‹è¯­è¨€
                const text = block.textContent;
                if (text.includes('def ') || text.includes('import ') || text.includes('print(')) {
                  block.className = 'language-python';
                }
                
                console.log(`Highlighting block ${index}:`, block.className);
                // åº”ç”¨æ–°çš„é«˜äº®
                try {
                  hljs.highlightElement(block);
                  console.log(`Block ${index} highlighted successfully`);
                } catch (e) {
                  console.error(`Error highlighting block ${index}:`, e);
                }
              });
              
              // æ·»åŠ Macæ ·å¼çš„SVGåœ†ç‚¹
              const preBlocks = preview.querySelectorAll('pre');
              preBlocks.forEach((pre, index) => {
                // æ£€æŸ¥æ˜¯å¦å·²ç»æ·»åŠ äº†Macæ ·å¼
                if (!pre.querySelector('.mac-sign')) {
                  // åˆ›å»ºMacæ ·å¼çš„SVGå…ƒç´ 
                  const macSign = document.createElement('span');
                  macSign.className = 'mac-sign';
                  macSign.style.cssText = 'display: flex; padding: 12px 12px 0;';
                  macSign.innerHTML = `<svg viewBox="0 0 450 130" height="13px" width="45px" y="0px" x="0px" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <ellipse fill="rgb(237,108,96)" stroke-width="2" stroke="rgb(220,60,54)" ry="52" rx="50" cy="65" cx="50"></ellipse>
                    <ellipse fill="rgb(247,193,81)" stroke-width="2" stroke="rgb(218,151,33)" ry="52" rx="50" cy="65" cx="225"></ellipse>
                    <ellipse fill="rgb(100,200,86)" stroke-width="2" stroke="rgb(27,161,37)" ry="52" rx="50" cy="65" cx="400"></ellipse>
                  </svg>`;
                  
                  // å°†SVGæ’å…¥åˆ°preå…ƒç´ çš„å¼€å¤´
                  pre.insertBefore(macSign, pre.firstChild);
                  console.log(`Added Mac style to code block ${index}`);
                }
              });
            } else {
              console.error('hljs not available during render');
            }
            
            // å†æ¬¡æ¢å¤æ»šåŠ¨ä½ç½®ï¼ˆé˜²æ­¢ä»£ç é«˜äº®åä½ç½®æ”¹å˜ï¼‰
            previewContent.scrollTop = currentScrollTop;
            
            // æ¸²æŸ“å®Œæˆ
            isRendering = false;
          }, 10);
          
          updateStats();
          scheduleAutoSave();
        }
        
        // äº‹ä»¶ç›‘å¬å™¨
        let isTyping = false;
        let typingTimer;
        
        // æ™ºèƒ½æ¸²æŸ“ç­–ç•¥
        codeMirrorEditor.on('change', () => {
          // å¦‚æœæ­£åœ¨å¿«é€Ÿè¾“å…¥ï¼Œä½¿ç”¨å¿«é€Ÿæ¸²æŸ“
          if (isTyping) {
            quickRender();
          } else {
            // ç¬¬ä¸€æ¬¡è¾“å…¥ï¼Œæ ‡è®°ä¸ºæ­£åœ¨è¾“å…¥çŠ¶æ€
            isTyping = true;
            quickRender();
          }
          
          // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
          clearTimeout(typingTimer);
          
          // è®¾ç½®æ–°çš„å®šæ—¶å™¨ï¼Œå¦‚æœ500mså†…æ²¡æœ‰æ–°çš„è¾“å…¥ï¼Œåˆ™è¿›è¡Œå®Œæ•´æ¸²æŸ“
          typingTimer = setTimeout(() => {
            isTyping = false;
            render(); // å®Œæ•´æ¸²æŸ“ï¼ŒåŒ…æ‹¬ä»£ç é«˜äº®
          }, 500);
        });
        
        // å¿«é€Ÿæ¸²æŸ“å‡½æ•°ï¼ˆä»…æ›´æ–°æ–‡æœ¬å†…å®¹ï¼Œä¸å¤„ç†ä»£ç é«˜äº®ï¼‰
        function quickRender() {
          isRendering = true; // å¼€å§‹æ¸²æŸ“
          let markdownText = getEditorValue();
          
          // ä¿å­˜å½“å‰æ»šåŠ¨ä½ç½®
          const previewContent = document.querySelector('.preview-content');
          const currentScrollTop = previewContent.scrollTop;
          
          // å¤„ç†æ¨ªå±æ»‘åŠ¨å¹»ç¯ç‰‡ï¼ˆåœ¨Markdownè½¬æ¢å‰ï¼‰
          markdownText = processSlideshow(markdownText);
          
          // å…ˆå¤„ç†ä¿¡æ¯å¡ç‰‡ï¼ˆåœ¨Markdownè½¬æ¢å‰ï¼‰
          markdownText = processInfoCards(markdownText);
          
          let html = converter.makeHtml(markdownText);
          
          // å¤„ç†ä¿¡æ¯å¡ç‰‡å ä½ç¬¦
          html = processInfoCardPlaceholders(html);
          
          // å¤„ç†å¼•ç”¨é“¾æ¥
          html = processReferences(html);
          
          preview.innerHTML = html;
          
          // æ¢å¤æ»šåŠ¨ä½ç½®
          previewContent.scrollTop = currentScrollTop;
          
          updateStats();
          
          // å¿«é€Ÿæ¸²æŸ“å®Œæˆ
          isRendering = false;
        }
        
        // è‡ªåŠ¨ä¿å­˜åŠŸèƒ½
        function scheduleAutoSave() {
          saveStatus.textContent = 'ä¿å­˜ä¸­...';
          
          clearTimeout(autoSaveTimer);
          autoSaveTimer = setTimeout(() => {
            localStorage.setItem('md_editor_draft', getEditorValue());
            localStorage.setItem('md_editor_save_time', new Date().toLocaleString());
            saveStatus.textContent = 'å·²ä¿å­˜';
          }, 1000);
        }
        
        // é€’å½’ä¸ºå…ƒç´ åŠå…¶å­å…ƒç´ æ³¨å…¥è¡Œå†…æ ·å¼
        function inlineStyles(el) {
          // å¦‚æœæ˜¯ä¿¡æ¯å¡ç‰‡çš„è¡¨æ ¼ï¼Œä¿æŒåŸæœ‰æ ·å¼ä¸å˜
          if (el.tagName === 'TABLE' && el.querySelector('td[style*="background-color: #D0F9D0"]')) {
            // å¯¹äºä¿¡æ¯å¡ç‰‡è¡¨æ ¼ï¼Œåªå¤„ç†å­å…ƒç´ 
            Array.from(el.children).forEach(child => inlineStyles(child));
            return;
          }
          
          // å¦‚æœæ˜¯ä¿¡æ¯å¡ç‰‡å†…çš„tdï¼Œä¿æŒåŸæœ‰æ ·å¼
          if (el.tagName === 'TD' && el.getAttribute('style') && el.getAttribute('style').includes('background-color: #D0F9D0')) {
            Array.from(el.children).forEach(child => inlineStyles(child));
            return;
          }
          
          // ç‰¹æ®Šå¤„ç†æ»‘åŠ¨å¹»ç¯ç‰‡sectionå…ƒç´  - ä¿æŒåŸæœ‰è¡Œå†…æ ·å¼
          if (el.tagName === 'SECTION' && el.getAttribute('style')) {
            // å¯¹äºå·²ç»æœ‰è¡Œå†…æ ·å¼çš„sectionå…ƒç´ ï¼Œä¿æŒä¸å˜ï¼Œä½†å¤„ç†å­å…ƒç´ 
            Array.from(el.children).forEach(child => inlineStyles(child));
            return;
          }
          
          // ç‰¹æ®Šå¤„ç†åŒ…å«æç¤ºæ–‡å­—çš„sectionå®¹å™¨
          if (el.tagName === 'SECTION' && el.querySelector('p') && el.textContent && el.textContent.includes('å·¦å³æ»‘åŠ¨çœ‹æ›´å¤š')) {
            // ä¿æŒæç¤ºæ–‡å­—å®¹å™¨çš„åŸæœ‰æ ·å¼ä¸å˜
            Array.from(el.children).forEach(child => inlineStyles(child));
            return;
          }
          
          // ç‰¹æ®Šå¤„ç†æ»‘åŠ¨å¹»ç¯ç‰‡ä¸­çš„æ®µè½å…ƒç´ 
          if (el.tagName === 'P' && el.closest('section[style*="overflow-x: scroll"]')) {
            // ä¿æŒæ»‘åŠ¨å¹»ç¯ç‰‡ä¸­æ®µè½çš„åŸæœ‰æ ·å¼ä¸å˜
            Array.from(el.children).forEach(child => inlineStyles(child));
            return;
          }
          
          // ç‰¹æ®Šå¤„ç†æ»‘åŠ¨å¹»ç¯ç‰‡çš„æç¤ºæ–‡å­—
          if (el.tagName === 'P' && el.textContent && el.textContent.includes('å·¦å³æ»‘åŠ¨çœ‹æ›´å¤š')) {
            // ä¿æŒæç¤ºæ–‡å­—çš„åŸæœ‰æ ·å¼ä¸å˜
            Array.from(el.children).forEach(child => inlineStyles(child));
            return;
          }
          
          // ç‰¹æ®Šå¤„ç†Macæ ·å¼çš„SVGå…ƒç´ 
          if (el.classList && el.classList.contains('mac-sign')) {
            // ä¿æŒMacæ ·å¼ä¸å˜ï¼Œä½†å¤„ç†å­å…ƒç´ 
            Array.from(el.children).forEach(child => inlineStyles(child));
            return;
          }
          
          // ç‰¹æ®Šå¤„ç†SVGå…ƒç´ 
          if (el.tagName === 'SVG' || el.tagName === 'ELLIPSE') {
            // SVGå…ƒç´ ä¿æŒåŸæœ‰å±æ€§ä¸å˜
            Array.from(el.children).forEach(child => inlineStyles(child));
            return;
          }
          
          // ç‰¹æ®Šå¤„ç†å›¾ç‰‡å…ƒç´ 
          if (el.tagName === 'IMG') {
            // æ£€æŸ¥æ˜¯å¦åœ¨æ»‘åŠ¨å¹»ç¯ç‰‡ä¸­
            const isInSlideshow = el.closest('section[style*="overflow-x: scroll"]');
            // æ£€æŸ¥æ˜¯å¦åœ¨åˆ—è¡¨ä¸­
            const isInList = el.closest('ul') || el.closest('ol') || el.closest('li');
            
            if (isInSlideshow) {
              el.setAttribute('style', 'display: block; width: 100%; height: auto; margin: 0.1em auto 0.2em; border-radius: 8px; border: 1px solid rgba(0, 0, 0, 0.04);');
            } else if (isInList) {
              // åˆ—è¡¨ä¸­çš„å›¾ç‰‡ä½¿ç”¨å‚è€ƒä»£ç çš„æ ·å¼
              el.setAttribute('style', 'display: block; max-width: 100%; margin: 0.1em auto 0.5em; border-radius: 8px; border: 1px solid rgba(0, 0, 0, 0.04);');
            } else {
              el.setAttribute('style', 'max-width: 100%; height: auto; display: block; margin: 16px auto; border-radius: 8px;');
            }
            return;
          }
          
          const cs = window.getComputedStyle(el);
          let styleStr = '';
          ['font-family','font-size','color','text-align','border','border-left','border-bottom','background','line-height','margin','padding','border-radius','box-shadow','text-shadow','width','display','position','white-space','word-wrap','word-break','overflow-x'].forEach(prop => {
            const val = cs.getPropertyValue(prop);
            if (val && val !== 'rgba(0, 0, 0, 0)' && val !== 'transparent' && val !== 'none') {
              styleStr += `${prop}:${val};`;
            }
          });
          
          // ç‰¹æ®Šå¤„ç†ä»£ç å—çš„Macæ ·å¼
          if (el.tagName === 'PRE') {
            styleStr += 'position:relative;';
          }
          
          el.setAttribute('style', styleStr);
          Array.from(el.children).forEach(child => inlineStyles(child));
        }
        
        // åˆå§‹æ¸²æŸ“
        render();
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åŠ è½½è‰ç¨¿
        const savedDraft = localStorage.getItem('md_editor_draft');
        if (savedDraft && savedDraft.trim()) {
          setEditorValue(savedDraft);
          render();
          const saveTime = localStorage.getItem('md_editor_save_time');
          if (saveTime) {
            saveStatus.textContent = `å·²åŠ è½½è‰ç¨¿`;
          }
        } else {
          // å¦‚æœæ²¡æœ‰è‰ç¨¿ï¼ŒåŠ è½½é»˜è®¤æµ‹è¯•å†…å®¹
          const defaultContent = `## Paper ç¼–è¾‘å™¨ç®€ä»‹

:::info Paper ç¼–è¾‘å™¨
Paper æ˜¯ä¸€æ¬¾è½»é‡çº§çº¯å‰ç«¯ï¼Œå• html æ–‡ä»¶å¯æ‰§è¡Œçš„å¾®ä¿¡å…¬ä¼—å· Markdown ç¼–è¾‘å™¨ã€‚  
ç°ä»£åŒ–ä¸‰æ å¸ƒå±€ï¼Œå®æ—¶ Markdown é¢„è§ˆï¼Œå“åº”å¼è®¾è®¡ï¼›æ”¯æŒå¤§éƒ¨åˆ† Markdown è¯­æ³• (æ•°å­¦å…¬å¼å’Œ Mermaidé™¤å¤–,è¯·åœ¨å‘å¸ƒåŒºè¿›è¡Œæ‰‹å·¥æ¸²æŸ“)ï¼Œæ”¯æŒä¿¡æ¯å¡ç‰‡ã€‚é¢„è§ˆåŒºä¸å¾®ä¿¡å…¬ä¼—å·ç¼–è¾‘å™¨ç­‰å®½ï¼Œæ‰€è§å³æ‰€å¾—ã€‚æ¬¢è¿ä½¿ç”¨ğŸ‘ï¼ **å®šåˆ¶å±äºæ¯ä¸ªäººè‡ªå·±çš„å¾®ä¿¡å…¬ä¼—å·æ ·å¼ï¼**
:::

### ğŸ¨ å¸¸è§æ ·å¼

> **å¼•ç”¨æ ·å¼**ï¼šç½‘ç»œä¸ä»…èƒ½ä½œä¸ºä¸€ä¸ªå³æ—¶çš„å‡ºç‰ˆæœºå™¨(å¦‚å¾®åšã€å¾®ä¿¡)ï¼Œå®ƒä¹Ÿå¯ä»¥è¢«ç”¨æ¥åˆ›é€ ä¸€ä¸ªå›¾ä¹¦é¦†(å¦‚ Wikipedia)ï¼Œä¸€åº§æ•°å­—èŠ±å›­ã€‚  
By ä¸‡å°¼ç“¦å°” Â· å¸ƒä»€ â€”â€” 1945 å¹´ã€ŠAs we may thinkã€‹

:::info ä¿¡æ¯å¡ç‰‡
è¿™æ˜¯ä¸€ä¸ªä¿¡æ¯å¡ç‰‡ï¼Œæ”¯æŒ **ç²—ä½“** å’Œ *æ–œä½“* æ–‡æœ¬ï¼Œå¯ä»¥åŒ…å«å¤šä¸ªæ®µè½å’Œå›¾ç‰‡ã€‚  
![picture](https://pic.thus.chat/rest/gdIbj5K.png)
:::


\`\`\`python
# è¿™æ˜¯ä¸€ä¸ª Python ä»£ç å—
def contains_number(s):
    return any(char.isdigit() for char in s)

test_string = "Hello123"
if contains_number(test_string):
    print("å­—ç¬¦ä¸²åŒ…å«æ•°å­—")
else:
    print("å­—ç¬¦ä¸²ä¸åŒ…å«æ•°å­—")
\`\`\`

| å¸¸ç”¨ç½‘å€è¡¨æ ¼             | åŠŸèƒ½                  | æ¨è    |
| ------------------------------------------- | ---------------------- | ------------ |
| [Mermaid æ¸²æŸ“](https://mermaid-live.nodejs.cn/edit) | Mermaidå›¾æ¸²æŸ“ | ğŸŒŸğŸŒŸğŸŒŸ  |
| [æ•°å­¦å…¬å¼æ¸²æŸ“](https://mathjax.thus.chat/)   	| æ•°å­¦å…¬å¼æ¸²æŸ“ | ğŸŒŸğŸŒŸğŸŒŸ |
| [Markdownè¯­æ³•é€ŸæŸ¥](https://xiaolinbaba.notion.site/Markdown-bcf20a9190db4b208dc137f755788405) | Markdown è¯­æ³•é€ŸæŸ¥ | ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ |

<![PIC01.png](https://pic.thus.chat/rest/0QryNTK.png),![PIC02.png](https://pic.thus.chat/rest/TypyNTK.png),![PIC03.png](https://pic.thus.chat/rest/6yRyNTK.png)>

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

**1. ç°ä»£åŒ–ä¸‰æ å¸ƒå±€**
- **ç¼–è¾‘åŒº**ï¼šæ”¯æŒ Markdown è¯­æ³•ç¼–å†™
- **é¢„è§ˆåŒº**ï¼šå®æ—¶æ¸²æŸ“ï¼Œ578px å®½åº¦ï¼ˆä¸å¾®ä¿¡å…¬ä¼—å·ç¼–è¾‘å™¨ç­‰å®½ï¼‰
- **å‘å¸ƒåŒº**ï¼šæä¾›ä¸€é”®å¤åˆ¶å’Œç›¸å…³å·¥å…·é“¾æ¥

**2. å¾®ä¿¡å…¬ä¼—å·å®Œç¾é€‚é…**
- é¢„è§ˆåŒºä¸¥æ ¼æŒ‰ç…§å¾®ä¿¡å…¬ä¼—å·æ ‡å‡†ï¼Œé¢„è§ˆåŒºä¸å¾®ä¿¡å…¬ä¼—å·ç¼–è¾‘å™¨ç­‰å®½ï¼ˆ578pxï¼‰
- æ”¯æŒçš„æ ·å¼å®Œå…¨å…¼å®¹å¾®ä¿¡å…¬ä¼—å·å¹³å°
- ä¸€é”®å¤åˆ¶åå¯ç›´æ¥ç²˜è´´åˆ°å…¬ä¼—å·ç¼–è¾‘å™¨

**3. ä¸°å¯Œçš„åŠŸèƒ½æ”¯æŒ**
- âœ… åŸºç¡€ Markdown è¯­æ³•ï¼ˆæ ‡é¢˜ã€æ®µè½ã€åˆ—è¡¨ã€è¡¨æ ¼ç­‰ï¼‰
- âœ… ä»£ç è¯­æ³•é«˜äº®ï¼ˆKimbie Light ä¸»é¢˜ï¼ŒMac é£æ ¼ï¼‰
- âœ… è‡ªå®šä¹‰ä¿¡æ¯å¡ç‰‡ï¼ˆ\`:::info\` è¯­æ³•ï¼‰
- âœ… æ¨ªå±æ»‘åŠ¨å¹»ç¯ç‰‡ï¼ˆ\`<![alt](url),![alt](url)>\` è¯­æ³•ï¼‰
- âœ… åŒæ­¥æ»šåŠ¨ï¼ˆç¼–è¾‘å™¨ä¸é¢„è§ˆåŒºè”åŠ¨ï¼‰
- âŒ æ•°å­¦å…¬å¼ï¼ˆä¸æ”¯æŒï¼Œè¯·ä½¿ç”¨å‘å¸ƒåŒºé“¾æ¥æ‰‹å·¥æ¸²æŸ“ï¼‰
- âŒ Mermaid å›¾è¡¨ï¼ˆä¸æ”¯æŒï¼Œè¯·ä½¿ç”¨å‘å¸ƒåŒºé“¾æ¥æ‰‹å·¥æ¸²æŸ“ï¼‰

### ğŸ› ï¸ æŠ€æœ¯å®ç°

**å‰ç«¯æŠ€æœ¯æ ˆï¼š**
- çº¯ HTML + CSS + JavaScriptï¼ˆæ— æ¡†æ¶ä¾èµ–ï¼‰
- Showdown.jsï¼ˆMarkdown è½¬ HTMLï¼‰
- Highlight.jsï¼ˆä»£ç è¯­æ³•é«˜äº®ï¼‰
- Canvas-Confettiï¼ˆå¤åˆ¶æˆåŠŸåŠ¨ç”»æ•ˆæœï¼‰

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- å®æ—¶ Markdown æ¸²æŸ“
- è¡Œå†…æ ·å¼æ³¨å…¥ï¼ˆç¡®ä¿å¾®ä¿¡å…¼å®¹æ€§ï¼‰
- å“åº”å¼è®¾è®¡

### ğŸ“ é¡¹ç›®ç»“æ„

\`\`\`
Paper/
â”œâ”€â”€ index.html         # ä¸»åº”ç”¨æ–‡ä»¶ï¼ˆå•æ–‡ä»¶åº”ç”¨ï¼‰
â”œâ”€â”€ README.md          # é¡¹ç›®è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ WechatSupport.md     # å¾®ä¿¡å…¬ä¼—å·æ”¯æŒçš„HTMLæ ‡ç­¾è¯´æ˜
â””â”€â”€ favicon.svg       	# ç½‘ç«™å›¾æ ‡
\`\`\`

### ğŸ¨ ç‰¹è‰²åŠŸèƒ½

**1. ä¿¡æ¯å¡ç‰‡**
\`\`\`markdown
:::info æç¤ºæ ‡é¢˜
è¿™é‡Œæ˜¯å¡ç‰‡å†…å®¹ï¼Œæ”¯æŒ**ç²—ä½“**å’Œ*æ–œä½“*
:::
\`\`\`

**2. æ¨ªå±æ»‘åŠ¨å¹»ç¯ç‰‡**
\`\`\`markdown
<![å›¾ç‰‡1](url1),![å›¾ç‰‡2](url2),![å›¾ç‰‡3](url3)>
\`\`\`

**3. Mac é£æ ¼ä»£ç å—**
- è‡ªåŠ¨æ·»åŠ  Mac æ ·å¼çš„ä¸‰è‰²åœ†ç‚¹
- æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€è¯­æ³•é«˜äº®

### ğŸš€ ä½¿ç”¨åœºæ™¯

è¿™ä¸ªé¡¹ç›®ç‰¹åˆ«é€‚åˆï¼š
- å¾®ä¿¡å…¬ä¼—å·å†…å®¹åˆ›ä½œè€…
- å• Html æ–‡ä»¶æœ¬åœ°ç¼–è¾‘å™¨
- è¿½æ±‚ç®€æ´é«˜æ•ˆçš„ Markdown ç¼–è¾‘ä½“éªŒ


## å¿«é€Ÿä½¿ç”¨

1. è®¿é—®åœ¨çº¿ç‰ˆ [paper.thus.chat](https://paper.thus.chat)
2. ä¸‹è½½ \`html\` å•æ–‡ä»¶åˆ°æœ¬åœ°ç›´æ¥è¿è¡Œ
3. ä¸‹è½½ \`html\` å•æ–‡ä»¶éƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨ä½¿ç”¨
4. ä¸‹è½½ \`html\` å•æ–‡ä»¶ç”¨ \`AI\` ä¿®æ”¹æˆè‡ªå·±å–œæ¬¢çš„æ ·å¼åé£Ÿç”¨ 


## ç‰¹åˆ«é¸£è°¢

Paper Markdown ç¼–è¾‘å™¨çš„è®¾è®¡çµæ„Ÿå‚è€ƒäº†ä¸¤ä¸ªé¡¹ç›®[jackywine](https://dqxf1izhlm.feishu.cn/wiki/RxfQwz2qXi06aqk17Hocfj5Gnk1), [md.doocs.org](https://md.doocs.org/)ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨è¿™ä¸¤ä¸ªé¡¹ç›®ï¼Œä¹Ÿæ„Ÿè°¢ä¸¤ä¸ªé¡¹ç›®ä½œè€…çš„ä»˜å‡ºï¼Œè°¢è°¢ã€‚

æœ€åï¼Œæœ¬é¡¹ç›®èŠ±è´¹äº†ä¸å°‘ç²¾åŠ›ï¼Œå¦‚æœå¯ä»¥ï¼Œè¯·å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œæˆ–åŠ ç¾¤è®¨è®º Markdown ç¼–è¾‘å™¨ç›¸å…³çŸ¥è¯†ã€‚æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼
![keeptouch.png](https://pic.thus.chat/rest/RxypSTK.png)`;
          
          setEditorValue(defaultContent);
          render();
        }
        
        // å¤åˆ¶æŒ‰é’®
        copyBtn.addEventListener('click', () => {
          const clone = preview.cloneNode(true);
          
          // å¤„ç†ä»£ç å—ä¸­çš„ç©ºæ ¼å’Œç¼©è¿›ï¼ŒåŒæ—¶ä¿æŒè¯­æ³•é«˜äº®
          const codeElements = clone.querySelectorAll('pre code');
          codeElements.forEach(code => {
            // é€’å½’å¤„ç†æ‰€æœ‰æ–‡æœ¬èŠ‚ç‚¹ï¼Œä¿æŒHTMLç»“æ„å’Œé«˜äº®æ ·å¼
            function processTextNodes(node) {
              if (node.nodeType === Node.TEXT_NODE) {
                // å¤„ç†æ–‡æœ¬èŠ‚ç‚¹ä¸­çš„ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦
                const text = node.textContent;
                if (text.includes(' ') || text.includes('\t')) {
                  const formattedText = text
                    .replace(/ /g, '\u00A0') // æ‰€æœ‰ç©ºæ ¼è½¬æ¢ä¸ºä¸é—´æ–­ç©ºæ ¼å­—ç¬¦
                    .replace(/\t/g, '\u00A0\u00A0\u00A0\u00A0'); // åˆ¶è¡¨ç¬¦è½¬æ¢ä¸ºå››ä¸ªä¸é—´æ–­ç©ºæ ¼å­—ç¬¦
                  node.textContent = formattedText;
                }
              } else {
                // é€’å½’å¤„ç†å­èŠ‚ç‚¹
                Array.from(node.childNodes).forEach(child => {
                  processTextNodes(child);
                });
              }
            }
            
            processTextNodes(code);
          });
          
          inlineStyles(clone);
          clone.style.position = 'fixed'; 
          clone.style.top = '0'; 
          clone.style.left = '-9999px';
          document.body.appendChild(clone);
          
          const range = document.createRange(); 
          range.selectNodeContents(clone);
          const sel = window.getSelection(); 
          sel.removeAllRanges(); 
          sel.addRange(range);
          
          let success = false;
          try { 
            success = document.execCommand('copy'); 
          } catch(e) { 
            success = false; 
          }
          
          sel.removeAllRanges(); 
          document.body.removeChild(clone);
          
          if (success) {
            copyBtn.textContent = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
              copyBtn.textContent = 'å¤åˆ¶åˆ°å…¬ä¼—å·';
            }, 2000);
            if (myConfetti) {
              myConfetti({ 
                particleCount: 150, 
                spread: 60, 
                origin: { y: 0.4 }
              });
            }
          } else {
            alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ã€‚');
          }
        });
        
        // åŒæ­¥æ»šåŠ¨åŠŸèƒ½
        let isEditorScrolling = false;
        let isPreviewScrolling = false;
        const previewContent = document.querySelector('.preview-content');
        
        function syncScroll(source, target) {
          // å¦‚æœæ­£åœ¨æ¸²æŸ“ï¼Œè·³è¿‡åŒæ­¥æ»šåŠ¨
          if (isRendering) return;
          if (source === 'editor' && isPreviewScrolling) return;
          if (source === 'preview' && isEditorScrolling) return;
          
          let sourceScrollTop, sourceScrollHeight;
          
          if (source === 'editor') {
            const scrollInfo = codeMirrorEditor.getScrollInfo();
            sourceScrollTop = scrollInfo.top;
            sourceScrollHeight = scrollInfo.height - scrollInfo.clientHeight;
          } else {
            sourceScrollTop = previewContent.scrollTop;
            sourceScrollHeight = previewContent.scrollHeight - previewContent.clientHeight;
          }
          
          const targetScrollHeight = target.scrollHeight - target.clientHeight;
          
          if (sourceScrollHeight > 0 && targetScrollHeight > 0) {
            const scrollRatio = sourceScrollTop / sourceScrollHeight;
            const targetScrollTop = scrollRatio * targetScrollHeight;
            target.scrollTop = targetScrollTop;
          }
        }
        
        // ç¼–è¾‘å™¨æ»šåŠ¨æ—¶åŒæ­¥é¢„è§ˆåŒº
        codeMirrorEditor.on('scroll', () => {
          if (isRendering) return; // æ¸²æŸ“æ—¶è·³è¿‡æ»šåŠ¨åŒæ­¥
          isEditorScrolling = true;
          syncScroll('editor', previewContent);
          setTimeout(() => {
            isEditorScrolling = false;
          }, 100);
        });
        
        // é¢„è§ˆåŒºæ»šåŠ¨æ—¶åŒæ­¥ç¼–è¾‘å™¨
        previewContent.addEventListener('scroll', () => {
          if (isRendering) return; // æ¸²æŸ“æ—¶è·³è¿‡æ»šåŠ¨åŒæ­¥
          isPreviewScrolling = true;
          const scrollInfo = previewContent.scrollTop;
          const scrollHeight = previewContent.scrollHeight - previewContent.clientHeight;
          const editorScrollInfo = codeMirrorEditor.getScrollInfo();
          const editorScrollHeight = editorScrollInfo.height - editorScrollInfo.clientHeight;
          
          if (scrollHeight > 0 && editorScrollHeight > 0) {
            const scrollRatio = scrollInfo / scrollHeight;
            const editorScrollTop = scrollRatio * editorScrollHeight;
            codeMirrorEditor.scrollTo(null, editorScrollTop);
          }
          
          setTimeout(() => {
            isPreviewScrolling = false;
          }, 100);
        });
      }
    });
  </script>
</body>
</html>